{
  "version": 3,
  "sources": ["../src/index.ts", "../src/baseHandler.ts", "../src/reactive.ts"],
  "sourcesContent": ["export {\r\n    reactive\r\n} from \"./reactive\";", "import { ReactiveFlags } from \"./reactive\";\r\nconst get = createGetter();\r\nconst set = createSetter();\r\n\r\nfunction createGetter() {\r\n    return function get(target, key, receiver) {\r\n\r\n        if (key === ReactiveFlags.IS_REACTIVE) {\r\n            return true;\r\n        }\r\n\r\n        // \u95EE\u9898\uFF1A\u4E3A\u4EC0\u4E48\u4F7F\u7528 Reflect.get \u53BB\u83B7\u53D6\u503C\u5462\r\n        // receiver \u53C2\u6570\u53EF\u4EE5\u6539\u53D8 target \u7684\u6307\u5411\uFF0C\u5B83\u8BA9 target \u6307\u5411\u5F53\u524D\u8C03\u7528getter\u7684\u5BF9\u8C61\r\n        // \u8FD9\u5BF9\u4E8E\u53D1\u751F\u4E86\u7EE7\u627F\u7684\u60C5\u51B5\uFF0C\u53EF\u4EE5\u660E\u786E\u8C03\u7528\u4E3B\u4F53\r\n        // \u4F8B\u5982\uFF1Aconst a = { name: 'ZHANG', get alias() { return this.name } } \r\n        // proxyA.alias \u6211\u4EEC\u5E0C\u671B\u5B83\u7684 this \u6307\u5411\u4E0D\u662F\u672C\u8EAB\u800C\u662F\u4EE3\u7406\u5BF9\u8C61\u5C31\u53EF\u4EE5\u4F7F\u7528 Reflect.get(proxyA, alias, receiver)\r\n        const res = Reflect.get(target, key, receiver);\r\n\r\n        return res;\r\n    };\r\n}\r\n\r\nfunction createSetter() {\r\n    return function set(target, key, value, receiver) {\r\n        // \u95EE\u9898\uFF1A\u4E3A\u4EC0\u4E48\u4F7F\u7528 Reflect.set \u53BB\u8BBE\u7F6E\u503C\u5462\r\n        // \u5F53\u6211\u4EECset\u7684key\u5982\u679C\u662Fundefined\u7684\u60C5\u51B5\u5B83\u5E76\u4E0D\u4F1A\u62A5TypeError\u5BFC\u81F4\u540E\u9762\u7684\u4EE3\u7801\u65E0\u6CD5\u6267\u884C\r\n        // \u800C\u662F\u8FD4\u56DE false \u8FD9\u53EF\u4EE5\u4FDD\u8BC1\u4EE3\u7801\u7684\u5065\u58EE\u6027\r\n        return Reflect.set(target, key, value, receiver);\r\n    };\r\n}\r\n\r\nexport const mutableHandlers = {\r\n    get,\r\n    set,\r\n};", "import { mutableHandlers } from \"./baseHandler\";\r\nexport const reactiveMap = new WeakMap();\r\n\r\n// reactive \u5BF9\u8C61\u6807\u8BB0\r\nexport const enum ReactiveFlags {\r\n    IS_REACTIVE = \"__v_isReactive\"\r\n}\r\n\r\nexport function reactive(target) {\r\n    return createReactiveObject(target, reactiveMap, mutableHandlers);\r\n}\r\n\r\nfunction createReactiveObject(target, proxyMap, baseHandlers) {\r\n    // \u5224\u65AD\u662F\u5426\u5DF2\u7ECF\u521B\u5EFA\u8FC7\r\n    const existingProxy = proxyMap.get(target);\r\n    if (existingProxy) {\r\n        return existingProxy;\r\n    }\r\n\r\n    // \u5224\u65AD\u662F\u4E0D\u662F reactive \u4E00\u4E2A(\u5DF2\u7ECFreactive\u7684\u5BF9\u8C61)\r\n    if (target[ReactiveFlags.IS_REACTIVE]) {\r\n        return target;\r\n    }\r\n\r\n    const proxy = new Proxy(target, baseHandlers);\r\n\r\n    // \u628A\u521B\u5EFA\u597D\u7684 proxy \u7ED9\u5B58\u8D77\u6765\uFF0C\r\n    proxyMap.set(target, proxy);\r\n    return proxy;\r\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;;;ACCA,MAAM,MAAM,aAAa;AACzB,MAAM,MAAM,aAAa;AAEzB,0BAAwB;AACpB,WAAO,cAAa,QAAQ,KAAK,UAAU;AAEvC,UAAI,QAAQ,oCAA2B;AACnC,eAAO;AAAA,MACX;AAOA,YAAM,MAAM,QAAQ,IAAI,QAAQ,KAAK,QAAQ;AAE7C,aAAO;AAAA,IACX;AAAA,EACJ;AAEA,0BAAwB;AACpB,WAAO,cAAa,QAAQ,KAAK,OAAO,UAAU;AAI9C,aAAO,QAAQ,IAAI,QAAQ,KAAK,OAAO,QAAQ;AAAA,IACnD;AAAA,EACJ;AAEO,MAAM,kBAAkB;AAAA,IAC3B;AAAA,IACA;AAAA,EACJ;;;ACjCO,MAAM,cAAc,oBAAI,QAAQ;AAOhC,oBAAkB,QAAQ;AAC7B,WAAO,qBAAqB,QAAQ,aAAa,eAAe;AAAA,EACpE;AAEA,gCAA8B,QAAQ,UAAU,cAAc;AAE1D,UAAM,gBAAgB,SAAS,IAAI,MAAM;AACzC,QAAI,eAAe;AACf,aAAO;AAAA,IACX;AAGA,QAAI,OAAO,qCAA4B;AACnC,aAAO;AAAA,IACX;AAEA,UAAM,QAAQ,IAAI,MAAM,QAAQ,YAAY;AAG5C,aAAS,IAAI,QAAQ,KAAK;AAC1B,WAAO;AAAA,EACX;",
  "names": []
}
